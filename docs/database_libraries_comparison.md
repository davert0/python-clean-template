# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL (–±–µ–∑ ORM)

## 1. asyncpg ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

**GitHub:** https://github.com/MagicStack/asyncpg  
**Stars:** ~6.8k  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è PostgreSQL –≤ Python
- –ù–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ Cython, –Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª PostgreSQL
- Async-first, connection pool –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ prepared statements
- –¢–∏–ø–∏–∑–∞—Ü–∏—è PostgreSQL —Ç–∏–ø–æ–≤

### –ü–ª—é—Å—ã:
‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ psycopg2)  
‚úÖ –ù–∞—Å—Ç–æ—è—â–∏–π async/await  
‚úÖ Connection pool –≤—Å—Ç—Ä–æ–µ–Ω  
‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  
‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ  
‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è FastAPI/Starlette  

### –ú–∏–Ω—É—Å—ã:
‚ùå –¢–æ–ª—å–∫–æ PostgreSQL (–Ω–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è)  
‚ùå –°–∏–Ω—Ç–∞–∫—Å–∏—Å $1, $2 –≤–º–µ—Å—Ç–æ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ %s  
‚ùå –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ psycopg2 extensions  

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ~50,000-100,000 queries/sec (–ø—Ä–æ—Å—Ç—ã–µ SELECT)
- ~10,000-30,000 inserts/sec

### –ü—Ä–∏–º–µ—Ä:
```python
import asyncpg

pool = await asyncpg.create_pool(dsn='postgresql://...')
row = await pool.fetchrow('select * from users where id = $1', 1)
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: 
üèÜ **–õ–£–ß–®–ò–ô –í–´–ë–û–† –¥–ª—è FastAPI + PostgreSQL**

---

## 2. psycopg3 (psycopg) ‚≠ê‚≠ê‚≠ê‚≠ê

**GitHub:** https://github.com/psycopg/psycopg  
**Stars:** ~1.6k  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è (–Ω–æ–≤–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ psycopg2
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ sync –ò async
- Connection pool (pgpool)
- –õ—É—á—à–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- Prepared statements

### –ü–ª—é—Å—ã:
‚úÖ Sync –∏ async –≤ –æ–¥–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ  
‚úÖ –ó–Ω–∞–∫–æ–º—ã–π API (–ø–æ—Ö–æ–∂ –Ω–∞ psycopg2)  
‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥ (type hints)  
‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ  
‚úÖ Connection pool (pgpool)  
‚úÖ –ü—Ä–∏–≤—ã—á–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å %s  

### –ú–∏–Ω—É—Å—ã:
‚ùå Async –º–µ–¥–ª–µ–Ω–Ω–µ–µ asyncpg (–Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ —á–∏—Å—Ç–æ–º Python)  
‚ùå –ú–µ–Ω—å—à–µ adoption –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ (–ø–æ–∫–∞)  
‚ùå –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∏—á–∏ –µ—â—ë –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- Sync: ~–∫–∞–∫ psycopg2
- Async: –º–µ–¥–ª–µ–Ω–Ω–µ–µ asyncpg –Ω–∞ 30-50%

### –ü—Ä–∏–º–µ—Ä:
```python
import psycopg
from psycopg_pool import AsyncConnectionPool

pool = AsyncConnectionPool('postgresql://...')
async with pool.connection() as conn:
    async with conn.cursor() as cur:
        await cur.execute('select * from users where id = %s', (1,))
        row = await cur.fetchone()
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
üí° **–•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å sync/async**

---

## 3. encode/databases ‚≠ê‚≠ê‚≠ê‚≠ê

**GitHub:** https://github.com/encode/databases  
**Stars:** ~3.8k  
**–°—Ç–∞—Ç—É—Å:** Maintenance mode (–Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç –Ω–æ–≤—ã–µ —Ñ–∏—á–∏)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è async –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL, MySQL, SQLite
- –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç asyncpg/aiomysql/aiosqlite
- Core queries (–∫–∞–∫ –≤ SQLAlchemy Core)

### –ü–ª—é—Å—ã:
‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ —á–∏—Å—Ç—ã–π API  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ë–î (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å)  
‚úÖ Query builder –≤—Å—Ç—Ä–æ–µ–Ω  
‚úÖ –•–æ—Ä–æ—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FastAPI  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç asyncpg –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º (–¥–ª—è Postgres)  

### –ú–∏–Ω—É—Å—ã:
‚ùå Maintenance mode (–º–∞–ª–æ –∞–ø–¥–µ–π—Ç–æ–≤)  
‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ (overhead)  
‚ùå –ü—Ä–∏–≤—è–∑–∫–∞ –∫ SQLAlchemy Core –¥–ª—è query builder  
‚ùå –ú–µ–Ω–µ–µ –≥–∏–±–∫–∏–π —á–µ–º —á–∏—Å—Ç—ã–π asyncpg  

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ë–ª–∏–∑–∫–∞ –∫ asyncpg (–Ω–µ–±–æ–ª—å—à–æ–π overhead –Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é)

### –ü—Ä–∏–º–µ—Ä:
```python
from databases import Database

database = Database('postgresql://...')
await database.connect()

query = "select * from users where id = :id"
row = await database.fetch_one(query=query, values={"id": 1})
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
‚ö†Ô∏è **–ë—ã–ª –ø–æ–ø—É–ª—è—Ä–µ–Ω, –Ω–æ —Å–µ–π—á–∞—Å –≤ maintenance mode. –õ—É—á—à–µ —á–∏—Å—Ç—ã–π asyncpg**

---

## 4. aiopg ‚≠ê‚≠ê‚≠ê

**GitHub:** https://github.com/aio-libs/aiopg  
**Stars:** ~1.4k  
**–°—Ç–∞—Ç—É—Å:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- Async wrapper –≤–æ–∫—Ä—É–≥ psycopg2
- Connection pool
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SA Core (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü–ª—é—Å—ã:
‚úÖ –ó–Ω–∞–∫–æ–º—ã–π API psycopg2  
‚úÖ Connection pool  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–∏—á psycopg2  

### –ú–∏–Ω—É—Å—ã:
‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ asyncpg (wrapper –≤–æ–∫—Ä—É–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞)  
‚ùå –£—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç (–ª—É—á—à–µ psycopg3)  
‚ùå –ú–µ–Ω—å—à–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π  

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ asyncpg –≤ ~2 —Ä–∞–∑–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
üö´ **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ asyncpg –∏–ª–∏ psycopg3**

---

## 5. psycopg2 ‚≠ê‚≠ê‚≠ê

**–ö–ª–∞—Å—Å–∏–∫–∞, —É–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏**

### –ü–ª—é—Å—ã:
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–µ–º  
‚úÖ –û–≥—Ä–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ  
‚úÖ –í—Å–µ –∑–Ω–∞—é—Ç –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å  

### –ú–∏–Ω—É—Å—ã:
‚ùå –¢–æ–ª—å–∫–æ sync  
‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç event loop –≤ async –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö  
‚ùå –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ pool (–Ω—É–∂–µ–Ω pgbouncer –∏–ª–∏ —Å–≤–æ–π)  

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
‚ö†Ô∏è **–¢–æ–ª—å–∫–æ –¥–ª—è sync –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –î–ª—è FastAPI - –ø–ª–æ—Ö–æ–π –≤—ã–±–æ—Ä**

---

## –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è

### 6. SQLAlchemy Core (–±–µ–∑ ORM)

```python
from sqlalchemy import create_engine, text

engine = create_engine('postgresql://...')
with engine.connect() as conn:
    result = conn.execute(text('select * from users where id = :id'), {'id': 1})
    row = result.fetchone()
```

**–ü–ª—é—Å—ã:**
- Query builder
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic
- –ú–æ–∂–Ω–æ –±–µ–∑ ORM (Core only)

**–ú–∏–Ω—É—Å—ã:**
- –¢—è–∂–µ–ª–æ–≤–µ—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- –°–ª–æ–∂–Ω–µ–µ —á–∏—Å—Ç–æ–≥–æ SQL

### 7. PonyORM / Tortoise ORM
‚ùå –≠—Ç–æ ORM - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

---

## üèÜ –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | Async | –°–∫–æ—Ä–æ—Å—Ç—å | –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å | Sync/Async | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|------------|-------|----------|--------------|------------|--------------|
| **asyncpg** | ‚úÖ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Async only | üèÜ –õ—É—á—à–∏–π |
| **psycopg3** | ‚úÖ | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | –û–±–∞ | üí° –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π |
| **databases** | ‚úÖ | ‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê | Async only | ‚ö†Ô∏è Maintenance |
| **aiopg** | ‚úÖ | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê | Async only | üö´ –£—Å—Ç–∞—Ä–µ–ª |
| **psycopg2** | ‚ùå | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Sync only | ‚ö†Ô∏è Sync only |

---

## üéØ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è FastAPI production:
```
1. asyncpg          (–µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ PostgreSQL)
2. psycopg3         (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å sync/async)
3. databases        (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –ë–î, –Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ - maintenance)
```

### –î–ª—è sync Django/Flask:
```
1. psycopg2         (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–µ–º)
2. psycopg3 sync    (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
```

### –î–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:
```
1. asyncpg          (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
```

---

## üí° –ú–æ–π –≤–µ—Ä–¥–∏–∫—Ç –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ asyncpg**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. ‚úÖ –≠—Ç–æ FastAPI –ø—Ä–æ–µ–∫—Ç ‚Üí –Ω—É–∂–µ–Ω –Ω–∞—Å—Ç–æ—è—â–∏–π async
2. ‚úÖ PostgreSQL ‚Üí asyncpg –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∏–º–µ–Ω–Ω–æ –ø–æ–¥ –Ω–µ–≥–æ
3. ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
4. ‚úÖ –û–≥—Ä–æ–º–Ω–æ–µ –∫–æ–º—å—é–Ω–∏—Ç–∏ –≤ FastAPI —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ
5. ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** psycopg3 - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å, –Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ–º–Ω–æ–≥–æ –Ω–∏–∂–µ.

**–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É—é:**
- ‚ùå databases - –≤ maintenance mode
- ‚ùå aiopg - —É—Å—Ç–∞—Ä–µ–ª
- ‚ùå psycopg2 - –±–ª–æ–∫–∏—Ä—É—é—â–∏–π, –ø–ª–æ—Ö–æ –¥–ª—è async

